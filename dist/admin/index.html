<!DOCTYPE html><html class="dark"> <html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>My Site</title><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="/_astro/about.B4CYkd_t.css"></head> <body> <section class="mx-auto max-w-3xl p-6 text-gray-100 bg-gray-950 rounded-2xl shadow-xl"><h1 class="text-3xl font-extrabold mb-6 tracking-tight">Tạo bài review mới (AI)</h1><form id="postForm" class="space-y-4"><div><label class="block text-sm font-medium mb-1 text-gray-300">Link affiliate / sản phẩm</label><input type="url" id="link" required placeholder="https://..." class="w-full p-3 border rounded-lg bg-gray-900 border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600"></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-1 text-gray-300">Từ khóa chính</label><input id="primaryKeyword" placeholder="ví dụ: máy lọc không khí mini" class="w-full p-3 border rounded-lg bg-gray-900 border-gray-700"></div><div><label class="block text-sm font-medium mb-1 text-gray-300">Ngôn ngữ</label><select id="language" class="w-full p-3 border rounded-lg bg-gray-900 border-gray-700"><option value="vi">Tiếng Việt</option><option value="en">English</option></select></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium mb-1 text-gray-300">Đối tượng</label><input id="audience" placeholder="người dùng phổ thông" class="w-full p-3 border rounded-lg bg-gray-900 border-gray-700"></div><div><label class="block text-sm font-medium mb-1 text-gray-300">Giọng điệu</label><input id="tone" placeholder="thân thiện" class="w-full p-3 border rounded-lg bg-gray-900 border-gray-700"></div></div><div><label class="block text-sm font-medium mb-1 text-gray-300">Tags (phân tách bởi dấu phẩy)</label><input id="tags" placeholder="review, affiliate" class="w-full p-3 border rounded-lg bg-gray-900 border-gray-700"></div><div class="flex items-center gap-3 pt-2"><input id="publishNow" type="checkbox" class="h-4 w-4 rounded border-gray-700 bg-gray-900"><label for="publishNow" class="text-sm text-gray-300">Đăng ngay (bỏ chọn để lưu <i>nháp</i>)</label></div><div class="flex items-center gap-3"><button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">Tạo bài viết</button><button id="createDraft" type="button" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg">Tạo NHÁP</button></div><div id="status" class="mt-4 text-sm text-gray-300"></div><div id="preview" class="mt-6 hidden"><h2 class="text-xl font-semibold mb-2">Ảnh xem trước</h2><img id="previewImg" alt="preview" class="rounded-lg border border-gray-700"></div></form><hr class="my-8 border-gray-800"><div class="flex items-center gap-3"><button id="runCronPublish" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg">Chạy cron (đăng ngay 1 bài)</button><button id="runCronDraft" class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg">Chạy cron (tạo 1 nháp)</button></div></section><script type="module">const d=document.getElementById("postForm"),e=document.getElementById("status"),o=document.getElementById("preview"),l=document.getElementById("previewImg"),r=document.getElementById("runCronPublish"),i=document.getElementById("runCronDraft");async function c(n){try{const t=await(await fetch("/api/generate-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();t.success?(e.textContent=`✅ Tạo thành công: ${t.file}`,t.image&&(l.src=t.image,o.classList.remove("hidden"))):e.textContent="❌ Lỗi: "+t.error}catch{e.textContent="❌ Lỗi mạng hoặc server."}}d.addEventListener("submit",async n=>{n.preventDefault(),e.textContent="⏳ Đang tạo bài viết...",o.classList.add("hidden");const a={link:document.getElementById("link").value,primaryKeyword:document.getElementById("primaryKeyword").value,language:document.getElementById("language").value,audience:document.getElementById("audience").value,tone:document.getElementById("tone").value,tags:document.getElementById("tags").value.split(",").map(t=>t.trim()).filter(Boolean),publishMode:document.getElementById("publishNow").checked?"publish":"draft"};await c(a)});document.getElementById("createDraft").addEventListener("click",async()=>{e.textContent="⏳ Đang tạo NHÁP...";const n={link:document.getElementById("link").value,primaryKeyword:document.getElementById("primaryKeyword").value,language:document.getElementById("language").value,audience:document.getElementById("audience").value,tone:document.getElementById("tone").value,tags:document.getElementById("tags").value.split(",").map(a=>a.trim()).filter(Boolean),publishMode:"draft"};await c(n)});r.addEventListener("click",async()=>{try{await fetch("/api/run-cron?mode=publish"),e.textContent="✅ Đã kích hoạt cron: tạo 1 bài đăng ngay."}catch{e.textContent="❌ Không chạy được cron."}});i.addEventListener("click",async()=>{try{await fetch("/api/run-cron?mode=draft"),e.textContent="✅ Đã kích hoạt cron: tạo 1 bài NHÁP."}catch{e.textContent="❌ Không chạy được cron."}});</script> <script src="/assets/js/main.js" defer></script> </body> </html></html>